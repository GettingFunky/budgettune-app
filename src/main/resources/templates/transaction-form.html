<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Καταχώρηση Συναλλαγής | BudgetTune</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<!-- Header -->
<div th:replace="~{fragments/header :: header}"
></div>

<div class="container mt-5">
    <h2 class="mb-4">Καταχώρηση Συναλλαγής</h2>

    <form th:action="@{${transactionDTO.id} == null ? '/transactions/create' : '/transactions/' + ${transactionDTO.id} + '/edit'}"
          th:object="${transactionDTO}" method="post" class="card p-4 shadow-sm">

        <input type="hidden" th:field="*{id}" />

        <div class="mb-3">
            <label for="description" class="form-label">Περιγραφή</label>
            <input type="text" id="description" th:field="*{description}" class="form-control" required>
            <div class="text-danger" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
        </div>

        <div class="mb-3">
            <label for="amount" class="form-label">Ποσό (€)</label>
            <input type="number" id="amount" th:field="*{amount}" step="0.01" min="0.01" max="1000000" class="form-control" required>
            <div class="text-danger" th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}"></div>
        </div>

        <div class="mb-3">
            <label for="date" class="form-label">Ημερομηνία</label>
            <input type="date" id="date" name="date" th:value="${transactionDTO.date != null ? transactionDTO.date : ''}"
                   class="form-control" required>
            <div class="text-danger" th:if="${#fields.hasErrors('date')}" th:errors="*{date}"></div>
        </div>

        <div class="mb-3">
            <label for="type" class="form-label">Τύπος Συναλλαγής</label>
            <select id="type" th:field="*{type}" class="form-select" required>
                <option value="" selected>-- Επιλέξτε τύπο --</option>
                <option th:value="INCOME">Έσοδο</option>
                <option th:value="EXPENSE">Έξοδο</option>
            </select>
            <div class="text-danger" th:if="${#fields.hasErrors('type')}" th:errors="*{type}"></div>
        </div>

        <div class="mb-3">
            <label for="notes" class="form-label">Σημειώσεις</label>
            <input type="text" id="notes" th:field="*{notes}" class="form-control">
            <div class="text-danger" th:if="${#fields.hasErrors('notes')}" th:errors="*{notes}"></div>
        </div>

        <div class="mb-3">
            <label for="means" class="form-label">Πηγή</label>
            <select id="means" th:field="*{means}" class="form-select">
                <option value="" selected hidden>Επιλέξτε τύπο...</option>
                <option th:value="CASH">Μετρητά</option>
                <option th:value="CARD">Κάρτα</option>
                <option th:value="OTHER">Άλλο</option>
            </select>
            <div class="text-danger" th:if="${#fields.hasErrors('means')}" th:errors="*{means}"></div>
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-primary">Αποθήκευση</button>
        </div>

    </form>
</div>

<!-- Footer -->
<div th:replace="~{fragments/footer :: footer}"
></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
