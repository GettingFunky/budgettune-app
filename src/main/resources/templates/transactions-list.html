<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Λίστα Συναλλαγών</title>
</head>
<body>

<h1>Λίστα Συναλλαγών</h1>

<a th:href="@{/transactions/create}">➕ Νέα Συναλλαγή</a>

<form th:action="@{/transactions/list}" method="get" style="margin-bottom: 20px;">

    <!-- Περιγραφή -->
    <label>Περιγραφή:</label>
    <input type="text" name="description">

    <!-- Ποσό -->
    <label>Ποσό Από:</label>
    <input type="number" name="amountMin" step="0.01">
    <label>Έως:</label>
    <input type="number" name="amountMax" step="0.01">

    <!-- Ημερομηνία -->
    <label>Ημερομηνία Από:</label>
    <input type="date" name="dateFrom">
    <label>Έως:</label>
    <input type="date" name="dateTo">

    <!-- Τύπος -->
    <label>Τύπος:</label>
    <input type="checkbox" name="types" value="INCOME"> Έσοδο
    <input type="checkbox" name="types" value="EXPENSE"> Έξοδο

    <!-- Πηγή -->
    <label>Πηγή:</label>
    <input type="checkbox" name="means" value="CASH"> Μετρητά
    <input type="checkbox" name="means" value="CARD"> Κάρτα
    <input type="checkbox" name="means" value="OTHER"> Άλλο

    <!-- Κουμπί Αναζήτησης -->
    <button type="submit">Αναζήτηση/Επαναφορά</button>

</form>


<table border="1">
    <thead>
    <tr>
        <th>Περιγραφή</th>
        <th>Ποσό</th>
        <th>Ημερομηνία</th>
        <th>Τύπος</th>
        <th>Πηγή</th>
        <th>Σημειώσεις</th>
        <th>Ενέργειες</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="transaction : ${transactions}">
        <td th:text="${transaction.description}">Περιγραφή</td>
        <td th:text="${transaction.amount}">Ποσό</td>
        <td th:text="${transaction.date}">Ημερομηνία</td>
        <td th:text="${transaction.type}">Τύπος</td>
        <td th:text="${transaction.means}">Πηγή</td>
        <td th:text="${transaction.notes}">Σημειώσεις</td>
        <td>
            <a th:href="@{/transactions/{id}/edit(id=${transaction.id})}">✏️ Επεξεργασία</a>
            |
            <form th:action="@{/transactions/{id}/delete(id=${transaction.id})}" method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Είστε σίγουρος ότι θέλετε να διαγράψετε αυτή τη συναλλαγή;')">🗑️ Διαγραφή</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<div style="margin-top: 20px;">
    <p><strong>Σύνολο Συναλλαγών:</strong> <span th:text="${totalTransactions}">0</span></p>
    <p><strong>Συνολικά Έσοδα:</strong> <span th:text="${totalIncome}">0</span> €</p>
    <p><strong>Συνολικά Έξοδα:</strong> <span th:text="${totalExpense}">0</span> €</p>
    <p><strong>Καθαρό Υπόλοιπο:</strong> <span th:text="${balance}">0</span> €</p>
</div>


</body>
</html>
